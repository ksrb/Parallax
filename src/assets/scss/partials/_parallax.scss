//Base styles
$perspective-val: 1px;
.parallax {
  perspective: $perspective-val;
  perspective-origin: 100%;
  height: 100vh;
  overflow-x: hidden;
  overflow-y: auto;

  .group {
    position: relative;
    height: 100vh;
    transform-style: preserve-3d;
  }

  @mixin set-group-z-indexes($num-groups) {
    @for $i from 1 through $num-groups {
      .group:nth-child(#{$i}) {
        z-index: $num-groups - $i;
      }
    }
  }

  @include set-group-z-indexes(3);

  .layer {
    $z-index: 0;
    transform-origin: 100%;
    position: absolute;
    width: 100%;
    height: 100%;

    &.base {
      $z-index: $z-index + 1;
      transform: translateZ(0);
      z-index: $z-index;
    }

    &.back {
      $z-index: $z-index + 1;
      transform: translateZ(-1px) scale(2);
      z-index: $z-index;
    }

    &.back.more {
      $z-index: $z-index + 1;
      transform: translateZ(-2px) scale(3);
      z-index: $z-index;
    }
  }
}

//Demo styles
.parallax {

  .group {
    &:nth-child(1) {
      .base {
        background: skyblue;
      }
    }
    &:nth-child(2) {
      .base {
        background: tomato;
      }
    }
    &:nth-child(3) {
      .base {
        background: chocolate;
      }
    }
  }

  .layer {
    //Center all content
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
  }
}
